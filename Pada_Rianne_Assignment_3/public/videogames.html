<script> var videogames_products= 
  [
      {
      "name": "Isabelle (Animal Crossing)",
      "price": 4.00,
      "image": "https://i.ibb.co/fMTkxMz/66-FEFF43-AB59-4885-A1-FC-8-C31-AFACD97-E.jpg"
      },
      {
      "name": "Tom Nook (Animal Crossing)",
      "price": 5.00,
      "image": "https://i.ibb.co/YtVs6yR/2989-FDBC-61-E0-4959-9-C14-F578830-A331-E.jpg"
      }
  ]; </script> 
<script>
	//these functions are to validate data entered in quantity box
  // Referenced from Daniel Port's Assignment 1 example
	function isNonNegInt(q, return_errors = false) {
	  errors = []; // Assume no errors at first
	  if (q == '') q = 0; // Handle blank inputs as if they are 0
	  if (Number(q) != q) errors.push('<font color="red">Not a number!</font>'); // Check if string is a number value
	  else if (q < 0) errors.push('<font color="red">Not a positive integer!</font>'); // Check if it is non-negative
	  else if (parseInt(q) != q) errors.push('<font color="red">Not an integer!</font>'); // Check that it is an integer
	  return return_errors ? errors : (errors.length == 0); // Returns any errors
	}
	//creates text above textbox
	// Referenced from Daniel Port
	function checkQuantityTextbox(theTextbox) {
	  errs = isNonNegInt(theTextbox.value, true); //checks value of textbox and sets isNonNegInt to true (calling the function) and assigns it to errors 
	  if (errs.length == 0) errs = ['You want:']; // Changes quantity label to 'You want:' if quantity is valid
	  if (theTextbox.value.trim() == '') errs = ['Quantity:'];
	  document.getElementById(theTextbox.name + '_label').innerHTML = errs.join(", "); //this displays the error messages above the quantity text box and tells the user what type of error they have
	}
   // Referenced from Daniel Port
	// Reads the text submitted, and loads an error message if a letter, negative number, or no number is submitted. This did not work in my Assignment 1, and I fixed it here. 
	window.onload = function () { // function for when the user submits and the page finishes loading
	  let params = (new URL(document.location)).searchParams; // Get the query string which has the form data
	  // Checks if quantities are valid after page loads
	  if (params.has('purchase_submit_button')) { // If form has purchase_submit_form
		has_errors = false; // Assume no errors
		total_qty = 0; // Used to check if quantities are inputted
		for (i = 0; i < products.length; i++) { // For loop to check quantity user inputs
		  if (params.has(`quantity${i}`)) { // If the form has quantity
			a_qty = params.get(`quantity${i}`); // Defines a_qty
			// Make textboxes sticky in case of invalid data
			quantity_form[`quantity${i}`].value = a_qty; // Assigns a_qty into the value of quantity(i) in quantity_form
			total_qty += a_qty; // Total_qty becomes total_qty plus a_qty
			if (!isNonNegInt(a_qty)) { // If a_qty is not a valid NonNegInt, it will display these errors 
			  has_errors = true; //has_errors is true
			  checkQuantityTextbox(quantity_form[`quantity${i}`]); // Displays errors on page
			}
		  }
		}
		// Respond to errors
		if (has_errors == true) { // Alerts when there are invalid quantities like negatives or decimals
		  alert("Please enter only valid quantities!"); 
		} else if (total_qty == 0) { // Alerts when nothing is submitted
		  alert("Please select quantities!");
		}
	  }
	}
  </script>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Shop | E-Shopper</title>
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/font-awesome.min.css" rel="stylesheet">
    <link href="css/prettyPhoto.css" rel="stylesheet">
    <link href="css/price-range.css" rel="stylesheet">
    <link href="css/animate.css" rel="stylesheet">
	<link href="css/responsive.css" rel="stylesheet">
	<link href="css/product.css" rel="stylesheet">
    <!--[if lt IE 9]>
    <script src="js/html5shiv.js"></script>
    <script src="js/respond.min.js"></script>
    <![endif]-->       
    <link rel="shortcut icon" href="images/ico/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="images/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="images/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="images/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="images/ico/apple-touch-icon-57-precomposed.png">
</head><!--/head-->

<body>
		<div class="header-middle"><!--header-middle-->
			<div class="container">
				<div class="row">
					<div class="col-md-4 clearfix">
						<div class="logo pull-left">
							<a href="index.html"><img src="" alt="" /></a>
						</div>
						<div class="btn-group pull-right clearfix">
							<div class="btn-group">
								<h1>Rianne's Handmade Earrings</h1>
								</button>
							
							</div>
							
							<div class="btn-group">	
							</div>
						</div>
					</div>
					<div class="col-md-8 clearfix">
						<div class="shop-menu clearfix pull-right">
							<ul class="nav navbar-nav">
								<li><a href="checkout.html"><i class="fa fa-crosshairs"></i> Checkout</a></li>
								<li><a href="cart.html"><i class="fa fa-shopping-cart"></i> Cart</a></li>
								<li><a href="login.html"><i class="fa fa-lock"></i> Login</a></li>
							</ul>
						</div>
					</div>
				</div>
			</div>
		</div><!--/header-middle-->
	
		<div class="header-bottom"><!--header-bottom-->
			<div class="container">
				<div class="row">
					<div class="col-sm-9">
						<div class="navbar-header">
							<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
								<span class="sr-only">Toggle navigation</span>
								<span class="icon-bar"></span>
								<span class="icon-bar"></span>
								<span class="icon-bar"></span>
							</button>
						</div>
						<div class="mainmenu pull-left">
							<ul class="nav navbar-nav collapse navbar-collapse">
								<li><a href="index.html">Home</a></li>
								<li><a href="allproducts.html">All Products</a></li>
								<li><a href="holidays.html">Holidays</a></li>
								<li><a href="music.html">Music/TV/Movies</a></li>
                				<li><a href="food.html">Objects/Food</a></li>
                				<li><a href="videogames.html">Video Games</a></li>
                
						</div>
					</div>
					<div class="col-sm-3">
						<div class="search_box pull-right">
							<input type="text" placeholder="Search"/>
						</div>
					</div>
				</div>
				</div>
			</div>
	</header>
	
	<section id="advertisement">
		<div class="container">
			<!--<img src="https://i.ibb.co/pKFZnzQ/8812daa4-d785-4a56-8873-5f34ad18e04e-200x200.png" width= "50" length= "50" alt=""  />-->
		</div>
	</section>
	
	<section>
					<div class="features_items"><!--features_items-->
						<h2 class="title text-center">Video Game Earrings</h2>
									
										<form name="quantity_form" action="process_form" method="POST"> <!--POSTS data to server-->
											<div>
												<main>
													<script> // function that prints out ALL product data
													for (i = 0; i < videogames_products.length; i++) {
														document.write(`
												  <section class="item">
												   <img src="${videogames_products[i].image}">  
													<h2>${videogames_products[i].name}</h2> 
													<p>$${videogames_products[i].price}</p> 
													<label id="quantity${i}_label"}">Quantity</label> <br>
													<input type="text" placeholder="0" name="quantity${i}" 
													onkeyup="checkQuantityTextbox(this);"> <br>
													</section>`);
													}
													// prints image, product name, the price and a textbox to enter quantities
												</script>
											</main>
										</div>
										<div style="text-align:center">
										<input name="purchase_submit_button" type="submit" value="Purchase"></div> </div>
									</main>
							
									</form>
									</body>
									</html> <div style="text-align:center">  <!--aligning button in the middle of page-->
								
									</div>
								
	</section>
		
		<div class="footer-bottom">
			<div class="container">
				<div class="row">
					<p class="pull-left">Copyright Â© 2013 E-Shopper. All rights reserved.</p>
					<p class="pull-right">Designed by <span><a target="_blank" href="http://www.themeum.com">Themeum</a></span></p>
				</div>
			</div>
		</div>
		
	</footer><!--/Footer-->
	

  
    <script src="js/jquery.js"></script>
	<script src="js/price-range.js"></script>
    <script src="js/jquery.scrollUp.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
    <script src="js/jquery.prettyPhoto.js"></script>
    <script src="js/main.js"></script>
</body>
</html>