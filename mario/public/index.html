<script src="./product_data.js" type="text/javascript"></script>
<script>
	//these functions are to validate data entered in quantity box
  // Referenced from Daniel Port's Assignment 1 example
	function isNonNegInt(q, return_errors = false) {
	  errors = []; // Assume no errors at first
	  if (q == '') q = 0; // Handle blank inputs as if they are 0
	  if (Number(q) != q) errors.push('<font color="red">Not a number!</font>'); // Check if string is a number value
	  else if (q < 0) errors.push('<font color="red">Not a positive integer!</font>'); // Check if it is non-negative
	  else if (parseInt(q) != q) errors.push('<font color="red">Not an integer!</font>'); // Check that it is an integer
	  return return_errors ? errors : (errors.length == 0); // Returns any errors
	}
	//creates text above textbox
	// Referenced from Daniel Port
	function checkQuantityTextbox(theTextbox) {
	  errs = isNonNegInt(theTextbox.value, true); //checks value of textbox and sets isNonNegInt to true (calling the function) and assigns it to errors 
	  if (errs.length == 0) errs = ['You want:']; // Changes quantity label to 'You want:' if quantity is valid
	  if (theTextbox.value.trim() == '') errs = ['Quantity:'];
	  document.getElementById(theTextbox.name + '_label').innerHTML = errs.join(", "); //this displays the error messages above the quantity text box and tells the user what type of error they have
	}
   // Referenced from Daniel Port
	// Reads the text submitted, and loads an error message if a letter, negative number, or no number is submitted. This did not work in my Assignment 1, and I fixed it here. 
	window.onload = function () { // function for when the user submits and the page finishes loading
	  let params = (new URL(document.location)).searchParams; // Get the query string which has the form data
	  // Checks if quantities are valid after page loads
	  if (params.has('purchase_submit_button')) { // If form has purchase_submit_form
		has_errors = false; // Assume no errors
		total_qty = 0; // Used to check if quantities are inputted
		for (i = 0; i < products.length; i++) { // For loop to check quantity user inputs
		  if (params.has(`quantity${i}`)) { // If the form has quantity
			a_qty = params.get(`quantity${i}`); // Defines a_qty
			// Make textboxes sticky in case of invalid data
			quantity_form[`quantity${i}`].value = a_qty; // Assigns a_qty into the value of quantity(i) in quantity_form
			total_qty += a_qty; // Total_qty becomes total_qty plus a_qty
			if (!isNonNegInt(a_qty)) { // If a_qty is not a valid NonNegInt, it will display these errors 
			  has_errors = true; //has_errors is true
			  checkQuantityTextbox(quantity_form[`quantity${i}`]); // Displays errors on page
			}
		  }
		}
		// Respond to errors
		if (has_errors == true) { // Alerts when there are invalid quantities like negatives or decimals
		  alert("Please enter only valid quantities!"); 
		} else if (total_qty == 0) { // Alerts when nothing is submitted
		  alert("Please select quantities!");
		}
	  }
	}
  </script>

<!DOCTYPE html>
<html lang="en">
<head>
    <style>
        .topnav {
      overflow: hidden;
      background-color: pink;
    }
    
    .topnav a {
      float: left;
      color: #f2f2f2;
      text-align: center;
      padding: 14px 16px;
      text-decoration: none;
      font-size: 17px;
    }
    /* Changes color on hover*/
  
    </style>
</head><!--/head-->
<body>
    <div class="header-middle"><!--header-middle-->
        <div class="container">
            <div class="row">
                    <div class="btn-group pull-right clearfix">
                        <div class="btn-group">
                            <h1>Rianne's Handmade Earrings</h1>
                            </button>
                        
                        </div>
                        
                        <div class="btn-group">	
                        </div>
                    </div>
                </div>
<body>
  <div class="topnav"> 
    <a class="active" href="./index.html">Home</a> 
    <a class="active" href="./all.html">All</a> 
    <a href="./tvmovie.html">TV, Movies and Music</a> 
    <a href="./videogame.html">Video Game</a> 
    <a href="./holidays.html">Holidays</a>
    <a href="./objectfood.html">Objects and Food</a> 
    <a href="./login.html">Login</a> 
    <a href="./cart.html">Cart</a>
    
</div>
    <head>
      
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Welcome</title>
        
        <!-- Font Awesome icons (free version)-->
        <script src="https://use.fontawesome.com/releases/v5.15.1/js/all.js" crossorigin="anonymous"></script>
        <!-- Google fonts-->
        <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css" />
        <link href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic,700italic" rel="stylesheet" type="text/css" />
        <link href="https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700" rel="stylesheet" type="text/css" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="css/styles.css" rel="stylesheet" />
    </head>
    <body id="page-top">
     
        <!-- Navigation-->
    
        <!-- Masthead-->
        <header class="masthead">
            <div class="container">
                <div class="masthead-subheading">Welcome To Rianne's Handmade Earrings!</div>
                <div class="masthead-heading text-uppercase">It's Nice To Meet You</div>
                <a class="btn btn-primary btn-xl text-uppercase js-scroll-trigger" href="/all.html">Click here to enter store</a>
            </div>
        </header>
        <!-- Bootstrap core JS-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Third party plugin JS-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.min.js"></script>
        <!-- Contact form JS-->
        <script src="assets/mail/jqBootstrapValidation.js"></script>
        <script src="assets/mail/contact_me.js"></script>
        <!-- Core theme JS-->
        <script src="js/scripts.js"></script>
    </body>
</html>
